<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <link rel="icon" href="https://s3.bmp.ovh/imgs/2021/09/61098deedf35a607.png"><title>数据查询 | 知识文档</title><meta name="description" content="本人学习过程中的知识总结和知识库">
    <link rel="modulepreload" href="/assets/app.7d2ff5c0.js"><link rel="modulepreload" href="/assets/1_DQL.html.97df12af.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.5a098b48.js"><link rel="modulepreload" href="/assets/1_DQL.html.0319dfc9.js">
    <link rel="stylesheet" href="/assets/style.34d3ada5.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="https://s3.bmp.ovh/imgs/2021/09/61098deedf35a607.png" alt="知识文档"><span class="site-name can-hide">知识文档</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">简介</p><ul class=""><li><!--[--><a href="/db/mysql/" class="nav-link router-link-active sidebar-item" aria-label="简介"><!--[--><!--]--> 简介 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">数据库入门</p><ul class=""><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="数据查询"><!--[--><!--]--> 数据查询 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#基础查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="基础查询"><!--[--><!--]--> 基础查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#条件查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="条件查询"><!--[--><!--]--> 条件查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#模糊查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="模糊查询"><!--[--><!--]--> 模糊查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#排序查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="排序查询"><!--[--><!--]--> 排序查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#分组查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="分组查询"><!--[--><!--]--> 分组查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#连接查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="连接查询"><!--[--><!--]--> 连接查询 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#笛卡尔积" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="笛卡尔积"><!--[--><!--]--> 笛卡尔积 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#sql92" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="SQL92"><!--[--><!--]--> SQL92 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#sql99" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="SQL99"><!--[--><!--]--> SQL99 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#嵌套查询-子查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="嵌套查询(子查询)"><!--[--><!--]--> 嵌套查询(子查询) <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#标量子查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="标量子查询"><!--[--><!--]--> 标量子查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#列子查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="列子查询"><!--[--><!--]--> 列子查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#行子查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="行子查询"><!--[--><!--]--> 行子查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#相关子查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="相关子查询"><!--[--><!--]--> 相关子查询 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#分页查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="分页查询"><!--[--><!--]--> 分页查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#联合查询" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="联合查询"><!--[--><!--]--> 联合查询 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#补充" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="补充"><!--[--><!--]--> 补充 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#用什么练习编写mysql" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="用什么练习编写MySQL?"><!--[--><!--]--> 用什么练习编写MySQL? <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/db/mysql/1_DQL.html#各语句的执行顺序是什么" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="各语句的执行顺序是什么?"><!--[--><!--]--> 各语句的执行顺序是什么? <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/db/mysql/2_DML.html" class="nav-link sidebar-item" aria-label="数据操纵"><!--[--><!--]--> 数据操纵 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/db/mysql/3_DDL&amp;DCL.html" class="nav-link sidebar-item" aria-label="数据库管理"><!--[--><!--]--> 数据库管理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/db/mysql/4_%E5%8F%98%E9%87%8F.html" class="nav-link sidebar-item" aria-label="变量，函数等"><!--[--><!--]--> 变量，函数等 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">数据库进阶</p><!----><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="数据查询" tabindex="-1"><a class="header-anchor" href="#数据查询" aria-hidden="true">#</a> 数据查询</h1><p>数据查询是数据库的基本功能, 查询数据的语法十分简单, 如下:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>数据段<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token keyword">FROM</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">WHERE</span> <span class="token punctuation">[</span>查询条件<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">[</span>分组条件<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">HAVING</span> <span class="token punctuation">[</span>分组筛选条件<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">[</span>排序条件<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">LIMIT</span><span class="token punctuation">)</span>
<span class="token comment">-- 这里加括号的是可以没有的</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果直接把所有部分一起看, 难免会搞得人头晕. 实际上, 数据查询的语句往往是一步一步地写出来的. 所以我们从最基本的基础查询开始学习.</p><h2 id="基础查询" tabindex="-1"><a class="header-anchor" href="#基础查询" aria-hidden="true">#</a> 基础查询</h2><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>查询字段<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>在MySQL中, <code>SELECT</code> 语句就像是其他语言的<code>print</code> 语句一样, 可以将内容输出(其他语言可能是在控制台输出的, 而MySQL则是像查询表一样输出), 单纯的<code>SELECT</code> 可以用, 如下:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">-- 输出1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>但是, 如果单纯的这样搞, <code>SELECT</code> 语句似乎和数据库不沾边了, 所以, 有意义的数据库查询操作一般要结合<code>FROM</code> 语句</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>查询字段<span class="token punctuation">]</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> s_name <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span>  <span class="token comment">-- 查询Student表中所有的项的名字</span>
<span class="token keyword">SELECT</span> s_name<span class="token punctuation">,</span> s_sex <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span> <span class="token comment">-- 查询Student表中的所有项的名字和性别</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span>  <span class="token comment">-- 查询Student表的所有项的所有内容</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其实, 查询字段的类型很多, 可以是 <strong>表的字段</strong>(也就是表中的某一列名)<strong>, 表达式, 常量, 函数</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">-- 查询字段是表达式, 输出2</span>
<span class="token keyword">SELECT</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span> <span class="token comment">-- 查询字段是常量, 输出&quot;张三&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 和数据库有关的查询函数</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DATABASE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">-- 输出数据库信息</span>
<span class="token keyword">SELECT</span> VERSION<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">-- 输出版本信息</span>
<span class="token keyword">SELECT</span> <span class="token keyword">USER</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 输出用户信息</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>至于一些更常用的函数, 则会在其他文章介绍到</p><h2 id="条件查询" tabindex="-1"><a class="header-anchor" href="#条件查询" aria-hidden="true">#</a> 条件查询</h2><p>借助<code>WHERE</code> 语句可以实现对<code>SELECT</code> 语句选中内容的筛选</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>查询字段<span class="token punctuation">]</span>
<span class="token keyword">FROM</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>查询条件<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>先看一个简单的例子:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询年龄大于18岁的学生的名单</span>
<span class="token keyword">SELECT</span> s_name
<span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> s_age <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>你可能对其他语言的条件语句有所了解, MySQL与其有所相同, 也有较大的不同</p><table><thead><tr><th>条件表达式</th><th>&gt;, &lt;, &gt;=, &lt;=, != ,&lt;&gt;, &lt;=&gt;</th></tr></thead><tbody><tr><td>逻辑表达式</td><td>and, or, not, &amp;&amp;,</td></tr><tr><td>模糊查询</td><td>like, in, between and, is null</td></tr></tbody></table><p>其中说明一些MySQL特有的操作:<code>&lt;&gt;</code> 意思是不等于, 即<code>!=</code> , <code>&lt;=&gt;</code> 是安全等于, 作用见下一条</p><p>另外, 还要注意MySQL对<code>null</code> 值的处理:</p><ul><li><p><code>&gt;, &lt;, &gt;=, &lt;=, != ,&lt;&gt;</code> 这些只会判断普通的内容, 不会对空值<code>null</code> 进行处理(总是会得到false的判断结果)</p></li><li><p><code>IS NULL</code> 或<code>IS NOT NULL</code>会对空值进行判断</p></li><li><p><code>&lt;=&gt;</code> 是安全等于, 会对空值和普通内容进行判断</p></li></ul><p>模糊查询也属于条件查询(个人以为), 具体见下一节</p><h2 id="模糊查询" tabindex="-1"><a class="header-anchor" href="#模糊查询" aria-hidden="true">#</a> 模糊查询</h2><p>模糊查询和条件查询非常相似，也同样是在<code>WHERE</code> 中进行判断的，只不过条件判断的语句是某一个范围, 而不是某个确切的值</p><hr><p>比如, 假如想获取年龄在18-20岁之间的学生, 则可以用模糊查询:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> s_age <span class="token operator">BETWEEN</span> <span class="token number">18</span> <span class="token operator">AND</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token comment">-- 或者</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> s_age <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这当然也等效于:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> s_age <span class="token operator">&gt;</span> <span class="token number">18</span> <span class="token operator">AND</span> s_age <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>不过个人觉得用<code>BETWEEN AND</code> 会更加直观, 便于阅读.</p><p>总结一下</p><ul><li><p><code>BETWEEN a AND b</code> 表示在a和b之间</p></li><li><p><code>IN (数组)</code> 表示取值在数组项之内</p></li></ul><hr><p><code>LIKE</code> 则常用于对字符串的模糊查询, 这里首先要介绍两个SQL语言的通配符:</p><ul><li><p><code>%</code> 表示任意个字符</p></li><li><p><code>_</code> 表示单个字符</p></li><li><p><code>\</code> 可以对通配符进行转义</p></li></ul><p>假如我们要查询所有姓张的学生的信息, 则可以用如下语句:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> s_name <span class="token operator">LIKE</span> <span class="token string">&quot;张%&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>再多看几个例子</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 1. 查询名字第二个字是&#39;子&#39;的学生</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> s_name <span class="token operator">LIKE</span> <span class="token string">&quot;_子%&quot;</span><span class="token punctuation">;</span>
<span class="token comment">-- 2. 查询名字中有&#39;一&#39;的学生</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> s_name <span class="token operator">LIKE</span> <span class="token string">&quot;%一%&quot;</span><span class="token punctuation">;</span>
<span class="token comment">-- 3. 查询商品表中以&quot;CS_&quot;开头的商品(通配符的使用)</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Goods <span class="token keyword">WHERE</span> g_name <span class="token operator">LIKE</span> <span class="token string">&quot;CS\_%&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="排序查询" tabindex="-1"><a class="header-anchor" href="#排序查询" aria-hidden="true">#</a> 排序查询</h2><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>数据段<span class="token punctuation">]</span>
<span class="token keyword">FROM</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span>
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>查询条件<span class="token punctuation">]</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token punctuation">[</span>排序条件<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>通过<code>ORDER BY</code> 语句进行排序查询, 后加排序的条件</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 将男生按照学生的年龄顺序排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_age<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>默认情况下的排序都是顺序排序(从小到大)的, 也就是<code>ASC</code> 的, 可以通过加<code>DESC</code> 表示逆序排序**(注意这两个修饰符加的位置是在后面)**</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 按照学生的年龄顺序排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_age <span class="token keyword">ASC</span><span class="token punctuation">;</span>
<span class="token comment">-- 按照学生的年龄逆战序排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_age <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>也可以安排多个排序条件, 比如有时候学生的年龄会重复等, 此时再按照学号顺序排序</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 按照学生年龄的顺序排序, 如果年龄相同, 则按照学号顺序排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_age<span class="token punctuation">,</span> s_id<span class="token punctuation">;</span>
<span class="token comment">-- 按照学生年龄的逆序排序, 如果年龄相同, 则按照学号顺序排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_age <span class="token keyword">DESC</span><span class="token punctuation">,</span> s_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>函数也可以放在排序条件的位置, 比如</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 按照名字的长度排序</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> LENGTH<span class="token punctuation">(</span>s_name<span class="token punctuation">)</span> <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="分组查询" tabindex="-1"><a class="header-anchor" href="#分组查询" aria-hidden="true">#</a> 分组查询</h2><p>首先, 请允许我列出一组函数:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">MIN</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">MAX</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">AVG</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>顾名思义, 这几个函数的作用很容易猜测出来, 分别是对一组数据求和, 求最小值, 求最大值, 求平均值和计数</p><p>我们可以对我们本身存在的表中的某一列使用这些函数, 比如:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例1. 求班级学生的平均年龄</span>
<span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_age<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span>
<span class="token comment">-- 一个可能的结果输出: 18 这意味着这个班的平均年龄是18</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这里, 我们等于把Student的s_age列看成了一个&quot;数组&quot;, <code>AVG(s_age)</code> 可以求出这个数组的平均值. 注意这里不能写成如下的形式:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> s_name<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_age<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>对于上面的第一行代码, <code>*</code> 代表了所有的列, 试想, 电脑怎么知道你想求哪一列的平均值呢?</p><p>而对于上面的第二列, 不难想象, AVG函数是把整个Student的s_age列当作了一个&quot;数组&quot;, 求得得结果是这个&quot;数组&quot;的平均值, 也就是说结果是一个值, 而s_name则是一整列, 这样很显然是错误的</p><hr><p>你可能注意到了, 我们之前列出的查询语法中有<code>GROUP BY</code> 字段, 这个字段似乎和分组有关, 而上面我们举的例子似乎并未用到这个字段. 上面我们是把已经实际存在的表当作一个组来进行操作的, 实际上, 我们可以用<code>GROUP BY</code> 字段手动把已经存在的表进行分组, 并对我们手动分组的这些表使用上述函数</p><p>分组查询用来<strong>将原来的数据表按一定条件分成某些列, 然后在这些列的基础上进行上述查询.</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>数据段<span class="token punctuation">]</span>
<span class="token keyword">FROM</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token keyword">WHERE</span> <span class="token punctuation">[</span>查询条件<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token punctuation">[</span>分组条件<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这么说可能比较抽象, 下面举一个例子</p><p>假如要查询不同性别的学生的平均年龄, 该如何操作呢? 与上一个例子不同, 这里我们把学生分组成了两个组: 男生和女生, 所以肯定是要用到<code>GROUP BY</code> 语句的:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> s_sex<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_age<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_sex<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>我们先看刚刚学习到的<code>GROUP BY</code> 语句, 这个语句的意思是按照<code>s_sex</code> 字段将Student表分成两个&quot;组&quot;, 然后之后的<code>SELECT</code> 语句则是在这两个分成的组上面进行的: 分别求出了两个组的s_age的平均值. 这里为什么可以带s_sex列呢? 我们是按照s_sex分组的, 那自然各个组的s_sex是一致的, 所以就可以用s_sex了!</p><p>再多看几个例子:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例1. 求Student表中一共有几个学生(看count的用法)</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student<span class="token punctuation">;</span> <span class="token comment">-- 这个为什么也还行?</span>

<span class="token comment">-- 案例2. 求这个班级有男生和女生各几人</span>
<span class="token keyword">SELECT</span> s_sex<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Student <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_sex<span class="token punctuation">;</span>

<span class="token comment">-- 案例3. 求每个人课程成绩的最高分, 最低分, 平均分</span>
<span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Score
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_id<span class="token punctuation">;</span>

<span class="token comment">-- 案例4. 求平均分及格的人课程成绩的最高分, 最低分, 平均分</span>
<span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Score
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_id <span class="token keyword">HAVING</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">60</span><span class="token punctuation">;</span>

<span class="token comment">-- 案例5: 求每个人及格课程成绩的最高分, 最低分, 平均分</span>
<span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span> <span class="token function">MAX</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Score
<span class="token keyword">WHERE</span> s_score <span class="token operator">&gt;</span> <span class="token number">60</span> <span class="token comment">-- 注意这个和上一题的不同</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>上面的例子都比较简单, 我们这里再提一下上面提到的两个点:</p><p><strong>为什么</strong><code>**COUNT(1)**</code>** 也可以计算出总人数?**</p><p><code>COUNT(列名)</code> 其实计算了某一列的数量, (也就是列数). 虽然没有<code>1</code> 这个列, 但是数据库会先临时的帮助我们创建一个全为1的列, 然后统计这一列的数量. 当然在实际应用中更多地使用的是<code>COUNT(*)</code></p><p><strong>案例4和案例5中, 两者的筛选条件分别放在了</strong><code>**WHERE**</code>** 语句和**<code>**HAVING**</code>** 中, 这两者有什么区别吗?**</p><p>根据原始表就能看出来的, 用<code>WHERE</code> , 分组后才能看出来的数据, 用<code>GROUP BY</code></p><p>这里我说的不够详细, 以后再补充</p><h2 id="连接查询" tabindex="-1"><a class="header-anchor" href="#连接查询" aria-hidden="true">#</a> 连接查询</h2><p>有时, 当我们查询的数据在多个表中的时候, 需要用到连接查询.</p><hr><h3 id="笛卡尔积" tabindex="-1"><a class="header-anchor" href="#笛卡尔积" aria-hidden="true">#</a> 笛卡尔积</h3><p>先举一个例子, 假如我们想查询每个课程的老师(要显示老师的名字):</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Course<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Teacher<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这样虽然可以查询出结果, 但是却是在两个表中的. 我们要尝试把两个表连接起来</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> c_name<span class="token punctuation">,</span> t_name
<span class="token keyword">FROM</span> Course<span class="token punctuation">,</span> Teacher<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这样的代码的确可以输出一些数据, 但是, 仔细看, 这些数据并没有逻辑性. <strong>默认地, 直接进行连接操作所求的其实是两个表的笛卡尔积.</strong></p><blockquote><p>笛卡尔积就是第一个表中的每一列都和第二个表中的每一列进行连接, 然后形成一个表.(详细的可以自行百度)</p></blockquote><p>造成这样结果的原因是: 我们知道<code>c_name</code> 和<code>t_name</code> 的实际意义, 并且知道Course表中的<code>t_id</code> 可以对应于一个Teacher表中唯一的<code>t_name</code> 值, 但是计算机并不知道(因为不同表中的列名是可以相同的). 所以计算机并没有自作多情地把他们当作相同的内容对待, 也就是说需要我们自己<strong>添加有效的连接条件.</strong></p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 在本例中, 我们通过WHERE语句中的等号</span>
<span class="token comment">-- 告诉数据库这两个列是同一个列, 请按照这两个列把他们连接在一起</span>
<span class="token keyword">SELECT</span> c_name<span class="token punctuation">,</span> t_name
<span class="token keyword">FROM</span> Course<span class="token punctuation">,</span> Teacher
<span class="token keyword">WHERE</span> Course<span class="token punctuation">.</span>t_id <span class="token operator">=</span> Teacher<span class="token punctuation">.</span>t_id<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意这里我们在两个<code>t_id</code> 前分别加了表名称. <strong>在操作中, 如果某两列的列名相同, 为了不产生歧义, 需要我们在前面加上表名.</strong></p><hr><p>下面我们详细介绍连接查询.</p><p>MySQL中支持两种版本的连接查询语句, 分别是SQL92和SQL99. <strong>在SQL92中, 仅仅支持内连接, 而在SQL99中, 仅不支持上述图中的全外连接.</strong></p><hr><h3 id="sql92" tabindex="-1"><a class="header-anchor" href="#sql92" aria-hidden="true">#</a> SQL92</h3><p>SQL版本问题</p><p>等值连接和非等值连接</p><p>表名重命名 如果重命名就不能用原来的表名了</p><h3 id="sql99" tabindex="-1"><a class="header-anchor" href="#sql99" aria-hidden="true">#</a> SQL99</h3><p>(待更新)</p><h2 id="嵌套查询-子查询" tabindex="-1"><a class="header-anchor" href="#嵌套查询-子查询" aria-hidden="true">#</a> 嵌套查询(子查询)</h2><p>将一个查询的结果当作另一个查询的条件, 一般放在<code>WHERE</code> 或<code>HAVING</code> 后, 但是也可以放在<code>SELECT</code> , <code>FROM</code> 或 <code>EXSITS</code> 中</p><p>注意子查询先执行</p><h3 id="标量子查询" tabindex="-1"><a class="header-anchor" href="#标量子查询" aria-hidden="true">#</a> 标量子查询</h3><p>子查询的结果是一个值(单行单列)</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例: 查询比3号学生成绩高的学生的学号</span>
<span class="token comment">-- STEP1: 查询3号学生的成绩</span>
<span class="token keyword">SELECT</span> s_score <span class="token keyword">FROM</span> score <span class="token keyword">WHERE</span> s_id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- STEP2: 将上面查询作为条件</span>
<span class="token keyword">SELECT</span> s_id <span class="token keyword">FROM</span> score <span class="token keyword">WHERE</span>
s_score <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> s_score <span class="token keyword">FROM</span> score <span class="token keyword">WHERE</span> s_id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例: 查询成绩比平均成绩高的学生的学号</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> s_id <span class="token keyword">FROM</span> score <span class="token keyword">WHERE</span>
s_score <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> score<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>如果子查询的结果是<code>null</code> , 那么外层查询的结果也是<code>null</code></li></ul><h3 id="列子查询" tabindex="-1"><a class="header-anchor" href="#列子查询" aria-hidden="true">#</a> 列子查询</h3><p>列子查询的结果是单列多行数据</p><p>常见多行比较操作符</p><table><thead><tr><th>操作符</th><th>含义</th></tr></thead><tbody><tr><td>IN / NOT IN</td><td>等于列表中的任意一个</td></tr><tr><td>ANY</td><td>SOME</td></tr><tr><td>ALL</td><td>和子查询返回的所有值比较</td></tr></tbody></table><p><code>IN</code> 判断数据是否在一个列表中, 我们之前在模糊查询的时候已经用过了.</p><p><code>IN</code> 也可以用<code>= ANY</code> 来代替.</p><p><code>ANY</code> 和<code>ALL</code> 的区别正如他们的意思所示.</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例: 查询选修了&#39;张三&#39;老师所教的任意一门课程的学生的信息</span>
<span class="token comment">-- Step1: 获取张三教的课程 (这里张三可能教了不止一门, 所以返回的结果可能不止一个)</span>
<span class="token keyword">SELECT</span> c_id <span class="token keyword">FROM</span> Course <span class="token keyword">WHERE</span> c_name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>
<span class="token comment">-- Step2: 获取选修了的课程的c_id是Step1结果中任意一个的s_id</span>
<span class="token keyword">SELECT</span> s_id <span class="token keyword">FROM</span> Score <span class="token keyword">WHERE</span> c_id <span class="token operator">IN</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> c_id <span class="token keyword">FROM</span> Course <span class="token keyword">WHERE</span> c_name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Step3: 获取Step2获取的学生的信息</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Student <span class="token keyword">WHERE</span> s_id <span class="token operator">=</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> s_id <span class="token keyword">FROM</span> Score <span class="token keyword">WHERE</span> c_id <span class="token operator">IN</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> c_id <span class="token keyword">FROM</span> Course <span class="token keyword">WHERE</span> c_name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span>
	<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 注意: 这里我分别用了IN和=ANY两种方式, 其结果是相同的</span>
<span class="token comment">-- 这里当然同样可以用连接查询或其他方法进行查询</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例: 查询比所有女生成绩都高的男生的名单</span>
<span class="token comment">-- 法一: </span>
<span class="token keyword">SELECT</span> s_name 
<span class="token keyword">FROM</span> student<span class="token punctuation">,</span> score
<span class="token keyword">WHERE</span> student<span class="token punctuation">.</span>s_id <span class="token operator">=</span> score<span class="token punctuation">.</span>s_id <span class="token operator">AND</span> score<span class="token punctuation">.</span>s_score <span class="token operator">&gt;</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>s_score<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Score <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 法二: </span>
<span class="token keyword">SELECT</span> s_name
<span class="token keyword">FROM</span> studnet<span class="token punctuation">,</span> score
<span class="token keyword">WHERE</span> student<span class="token punctuation">.</span>s_id <span class="token operator">=</span> score<span class="token punctuation">.</span>s_id <span class="token operator">AND</span> score<span class="token punctuation">.</span>s_score <span class="token operator">&gt;</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> s_score <span class="token keyword">FROM</span> score <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="行子查询" tabindex="-1"><a class="header-anchor" href="#行子查询" aria-hidden="true">#</a> 行子查询</h3><p>不常用, 暂时不说了</p><h3 id="相关子查询" tabindex="-1"><a class="header-anchor" href="#相关子查询" aria-hidden="true">#</a> 相关子查询</h3><p>EXISTS后的子查询叫相关子查询, 请不要关注这个名字, 先看下面的例子:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 上式结果为1(因为EXISTS后面的子查询的结果不是空, 所以原式变为SELECT 1)</span>
<span class="token keyword">SELECT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;BT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 上式结果为0(因为没有性别为BT的学生)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>EXISTS</code> 的返回结果是1或0, 如果后面所跟查询的结果为<code>null</code> 就返回0, 否则返回1</p><p>这种用法也不常见, 因为往往可以用别的方法代替, 下面举几个例子理解一下:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例: 查询在教课的老师的名称</span>
<span class="token keyword">SELECT</span> t_name
<span class="token keyword">FROM</span> teacher t
<span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
	<span class="token keyword">SELECT</span> <span class="token operator">*</span>
	<span class="token keyword">FROM</span> course
	<span class="token keyword">WHERE</span> t<span class="token punctuation">.</span>t_id <span class="token operator">=</span> course<span class="token punctuation">.</span>t_id
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="分页查询" tabindex="-1"><a class="header-anchor" href="#分页查询" aria-hidden="true">#</a> 分页查询</h2><p>对查询到的数据, 有时候我们只需要其中的一部分, 这个时候可以用分页查询来选取其中的一部分</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>其他查询语句
<span class="token keyword">LIMIT</span> <span class="token punctuation">[</span>开始位置<span class="token punctuation">]</span><span class="token punctuation">,</span> 数量<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>比如, 我想知道成绩前三名的学生的id:</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> s_id
<span class="token keyword">FROM</span> score
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_score
<span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token comment">-- 或</span>
<span class="token keyword">SELECT</span> s_id
<span class="token keyword">FROM</span> score
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> s_score
<span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>LIMIT</code> 语句的索引是从0开始的. 当索引是从0开始时, 第一个参数可以省略(上面例子的第二种做法).</p><h2 id="联合查询" tabindex="-1"><a class="header-anchor" href="#联合查询" aria-hidden="true">#</a> 联合查询</h2><p>用<code>UNION</code> 关键词可以实现联合查询, 其作用是将多个查询的结果的并集展示, 要求各查询有相同的列数</p><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 假如现在有两个班级表: student_A, student_B</span>
<span class="token comment">-- 求A班级的男生和B班级的女生的名单</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student_A <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span>
<span class="token keyword">UNION</span> 
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> student_B <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>注意第一条语句没有<code>;</code> 分号.</p></li><li><p>默认地, <code>UNION</code> 会合并两个结果中相同的部分, 如果不想这么做, 应该用<code>UNION ALL</code> 代替<code>UNION</code></p></li><li><p>尽管列数相同就可以进行联合查询, 但是如果各列数据的意义不相同, 则可能会没有实际意义, 如</p></li></ul><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 假如现在有两个班级表: student_A, student_B</span>
<span class="token comment">-- 求A班级的男生和B班级的女生的名单</span>
<span class="token keyword">SELECT</span> s_name<span class="token punctuation">,</span> s_sex <span class="token keyword">FROM</span> student_A <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;男&quot;</span>
<span class="token keyword">UNION</span> 
<span class="token keyword">SELECT</span> s_name<span class="token punctuation">,</span> s_age <span class="token keyword">FROM</span> student_B <span class="token keyword">WHERE</span> s_sex <span class="token operator">=</span> <span class="token string">&quot;女&quot;</span><span class="token punctuation">;</span>
<span class="token comment">-- 这样把s_sex和s_age放在同一列似乎没有什么用</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="补充" tabindex="-1"><a class="header-anchor" href="#补充" aria-hidden="true">#</a> 补充</h2><h3 id="用什么练习编写mysql" tabindex="-1"><a class="header-anchor" href="#用什么练习编写mysql" aria-hidden="true">#</a> 用什么练习编写MySQL?</h3><ul><li><p>Workbench (MySQL自带的), 不是很好看, 但是代码报错很全面</p></li><li><p>SQLyog 不错</p></li><li><p>VSCode 上的插件也很方便</p></li><li><p>Navicat 好看, <s>不过收费</s></p></li></ul><h3 id="各语句的执行顺序是什么" tabindex="-1"><a class="header-anchor" href="#各语句的执行顺序是什么" aria-hidden="true">#</a> 各语句的执行顺序是什么?</h3><div class="language-sql ext-sql line-numbers-mode"><pre class="language-sql"><code>子查询
<span class="token keyword">FROM</span>
<span class="token keyword">WHERE</span>
<span class="token keyword">SELECT</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
<span class="token keyword">LIMIT</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/db/mysql/2_DML.html" class="nav-link" aria-label="数据操纵"><!--[--><!--]--> 数据操纵 <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.7d2ff5c0.js" defer></script>
  </body>
</html>
