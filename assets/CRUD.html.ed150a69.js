import{o as n,c as s,F as a,a as t,e}from"./app.78648994.js";const c={},o=t("h1",{id:"基本增删改查",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#基本增删改查","aria-hidden":"true"},"#"),e(" 基本增删改查")],-1),l=t("h2",{id:"preparedstatement的引入",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#preparedstatement的引入","aria-hidden":"true"},"#"),e(" PreparedStatement的引入")],-1),p=t("p",null,"获取数据库连接后, 要对数据库进行各种操作.",-1),u=t("p",null,[e("在 "),t("code",null,"java.sql"),e(" 包中有3个接口分别定义了对数据库不同的调用方式:")],-1),r=t("ol",null,[t("li",null,"Statement：用于执行静态 SQL 语句并返回它所生成结果的对象。"),t("li",null,"PrepatedStatement：SQL 语句被预编译并存储在此对象中，可以使用此对象多次高效地执行该语句。"),t("li",null,"CallableStatement：用于执行 SQL 存储过程")],-1),i=t("p",null,[e("在使用"),t("code",null,"PreparedStatement"),e(" 之前, 我们用的是"),t("code",null,"Statement"),e(" 类, 但是这个类有"),t("code",null,"SQL注入"),e(" 的安全漏洞, 且存在拼串操作，繁琐的问题, 所以被我们弃用. 我们稍微举一个例子, 来了解一下什么是SQL注入:")],-1),k=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// 获取用户输入"),e("\n"),t("span",{class:"token class-name"},"Scanner"),e(" scan "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Scanner"),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("in"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("out"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"print"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"用户名："'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"String"),e(" userName "),t("span",{class:"token operator"},"="),e(" scan"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"nextLine"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("out"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"print"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"密   码："'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"String"),e(" password "),t("span",{class:"token operator"},"="),e(" scan"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"nextLine"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 拼接字符串(拼串操作看着不清晰, 麻烦)"),e("\n"),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"SELECT user,password FROM user_table WHERE USER = \'"'),e(),t("span",{class:"token operator"},"+"),e(" userName "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},"\"' AND PASSWORD = '\""),e(),t("span",{class:"token operator"},"+"),e(" password "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token string"},'"\'"'),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 对用户输入进行验证"),e("\n"),t("span",{class:"token class-name"},"User"),e(" user "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"get"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"User"),t("span",{class:"token punctuation"},"."),t("span",{class:"token keyword"},"class"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"if"),e(),t("span",{class:"token punctuation"},"("),e("user "),t("span",{class:"token operator"},"!="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("out"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"println"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"登陆成功!"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"else"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("out"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"println"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"用户名或密码错误！"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n\n"),t("span",{class:"token comment"},"// 用户输入的字符串如果不经过检查就直接拼接进来的话, 可能会造成SQL注入问题"),e("\n"),t("span",{class:"token comment"},"// 比如, 假如用户输入了某些内容后, sql语句经过拼接后可能会形成:"),e("\n"),t("span",{class:"token comment"},"// SELECT user,password FROM user_table "),e("\n"),t("span",{class:"token comment"},"// WHERE USER = '1' or ' AND PASSWORD = '='1' or '1' = '1';"),e("\n"),t("span",{class:"token comment"},"// 这样user就会!=null了"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br")])],-1),m=t("p",null,[t("code",null,"PreParedStatement"),e(" 是 "),t("code",null,"Statement"),e(" 的子接口, 大概意思就是这个接口的实现类对每一条SQL语句都进行了预编译, 我们在使用时只用在对应的位置填充相应的参数就可以了. 很显然, 这种方式会带来两个好处:")],-1),b=t("ol",null,[t("li",null,"更安全了, 防止SQL注入"),t("li",null,"由于预编译了, 所以效率会快一点")],-1),d=t("p",null,[t("img",{src:"/assets/image-20210715203845914.0fcee3d9.png",alt:"image-20210715203845914"})],-1),g=t("h2",{id:"preparedstatement的使用",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#preparedstatement的使用","aria-hidden":"true"},"#"),e(" PreparedStatement的使用")],-1),y=t("p",null,"**整体步骤: **",-1),S=t("ol",null,[t("li",null,[e("在 "),t("code",null,"String sql"),e(" 中保存SQL语句(可以使用占位符占位)")]),t("li",null,[e("用连接的 "),t("code",null,"preparedStatement(String sql)"),e(" 方法获取一个PreparedStatement对象")]),t("li",null,"如果有, 填充第一步中的占位符"),t("li",null,[e("用"),t("code",null,"preparedStatement"),e("对象执行相应的操作")])],-1),f=t("h3",{id:"示例-插入一条数据",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#示例-插入一条数据","aria-hidden":"true"},"#"),e(" 示例: 插入一条数据")],-1),w=t("p",null,"这里省略了连接、关闭数据库的相关代码以及对异常的处理.",-1),h=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// 1. 编写SQL语句, 注意这里会有?作为占位符"),e("\n"),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"INSERT INTO customers(name, email, birth) VALUES(?,?,?);"'),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 2. 获取PreparedStatement对象"),e("\n"),t("span",{class:"token class-name"},"PreparedStatement"),e(" ps "),t("span",{class:"token operator"},"="),e(" conn"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"preparedStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 3. 替换占位符(按照占位符需要的数据类型)"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"张三"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// name 是 String 类型"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"123@qq.com"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token comment"},"// email 也是"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"1999-2-10"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("  "),t("span",{class:"token comment"},"// birth 可以是String类型"),e("\n\n"),t("span",{class:"token comment"},"// 4. 执行SQL语句"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"execute"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br")])],-1),v=t("p",null,"插入操作是一个很常用的功能, 我们不妨这个操作进行进一步的封装, 这样可以让我们增加代码的复用性(少敲一点代码):",-1),x=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// 尽管这块代码并不算漂亮, 但是相信可以提供一种编程的思想"),e("\n"),t("span",{class:"token keyword"},"public"),e(),t("span",{class:"token keyword"},"static"),e(),t("span",{class:"token keyword"},"void"),e(),t("span",{class:"token function"},"commonUpdate"),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"String"),e(" sql"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"Object"),e(),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),e("args"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token class-name"},"Connection"),e(" connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"PreparedStatement"),e(" ps "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"try"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token comment"},"// getConnect()是自己封装的方法"),e("\n        "),t("span",{class:"token comment"},"// 用来获取一个Connection对象, 连接数据库"),e("\n        connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"getConnection"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        ps "),t("span",{class:"token operator"},"="),e(" connection"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"prepareStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" args"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n            "),t("span",{class:"token comment"},"// i 从 1 开始"),e("\n            ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},"["),e("i"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n        ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"execute"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"catch"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Exception"),e(" e"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        e"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"printStackTrace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"finally"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token function"},"closeConnection"),t("span",{class:"token punctuation"},"("),e("connection"),t("span",{class:"token punctuation"},","),e(" ps"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br")])],-1),j=t("h3",{id:"实现删改功能",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#实现删改功能","aria-hidden":"true"},"#"),e(" 实现删改功能")],-1),C=t("p",null,"插入操作和删除操作、修改操作的区别不大， 所以如果搞明白了上一块是怎么封装的, 这一块也是同样的道理(甚至代码都不用改):",-1),L=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token doc-comment comment"},[e("/**\n     * 完成增删改的通用代码\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"sql"),e(" String sql语句\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"args"),e(" 可变参数列表\n     */")]),e("\n"),t("span",{class:"token keyword"},"public"),e(),t("span",{class:"token keyword"},"static"),e(),t("span",{class:"token keyword"},"void"),e(),t("span",{class:"token function"},"commonUpdate"),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"String"),e(" sql"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"Object"),e(),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),e("args"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token class-name"},"Connection"),e(" connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"PreparedStatement"),e(" ps "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"try"),e(),t("span",{class:"token punctuation"},"{"),e("\n        connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"getConnection"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        ps "),t("span",{class:"token operator"},"="),e(" connection"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"prepareStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" args"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n            ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},"["),e("i"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n        ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"execute"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"catch"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Exception"),e(" e"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        e"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"printStackTrace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"finally"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token function"},"closeConnection"),t("span",{class:"token punctuation"},"("),e("connection"),t("span",{class:"token punctuation"},","),e(" ps"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br")])],-1),O=t("h3",{id:"查找操作",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#查找操作","aria-hidden":"true"},"#"),e(" 查找操作")],-1),q=t("h4",{id:"基本查找实现",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#基本查找实现","aria-hidden":"true"},"#"),e(" 基本查找实现")],-1),D=t("p",null,[t("strong",null,"查找操作"),e("与"),t("strong",null,"增删改操作"),e("相比, 由于查找需要数据库返回一定的数据, 所以相对而言稍微复杂了一点.")],-1),T=t("p",null,"由于不同的查询语句返回值的结构可能不同, 所以, 首先我们需要一种可以保存返回值的类.",-1),E=t("blockquote",null,[t("p",null,[t("strong",null,"ORM思想(Object Relational Mapping)")]),t("ul",null,[t("li",null,"一个数据表对应一个Java类"),t("li",null,"表中一条记录对应Java类的一个对象"),t("li",null,"表中一个字段对应Java类的一个属性")]),t("p",null,"比如, 假如我们想查询customer表, 就需要有一个如下的java类:"),t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token keyword"},"public"),e(),t("span",{class:"token keyword"},"class"),e(),t("span",{class:"token class-name"},"Customer"),e(),t("span",{class:"token punctuation"},"{"),e("\n   "),t("span",{class:"token comment"},"// 这些数据域对应SQL中表的项, 也就是查询的结果包含哪些数据"),e("\n   "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token keyword"},"int"),e(" id"),t("span",{class:"token punctuation"},";"),e("\n   "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token class-name"},"String"),e(" name"),t("span",{class:"token punctuation"},";"),e("\n   "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token class-name"},"String"),e(" email"),t("span",{class:"token punctuation"},";"),e("\n   "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token class-name"},"Date"),e(" birth"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br")])]),t("table",null,[t("thead",null,[t("tr",null,[t("th",{style:{"text-align":"center"}},"Java类型"),t("th",{style:{"text-align":"center"}},"SQL类型")])]),t("tbody",null,[t("tr",null,[t("td",{style:{"text-align":"center"}},"boolean"),t("td",{style:{"text-align":"center"}},"BIT")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"byte"),t("td",{style:{"text-align":"center"}},"TINYINT")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"short"),t("td",{style:{"text-align":"center"}},"SMALLINT")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"int"),t("td",{style:{"text-align":"center"}},"INTEGER")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"long"),t("td",{style:{"text-align":"center"}},"BIGINT")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"String"),t("td",{style:{"text-align":"center"}},"CHAR,VARCHAR,LONGVARCHAR")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"byte array"),t("td",{style:{"text-align":"center"}},"BINARY , VAR BINARY")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"java.sql.Date"),t("td",{style:{"text-align":"center"}},"DATE")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"java.sql.Time"),t("td",{style:{"text-align":"center"}},"TIME")]),t("tr",null,[t("td",{style:{"text-align":"center"}},"java.sql.Timestamp"),t("td",{style:{"text-align":"center"}},"TIMESTAMP")])])])],-1),R=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token class-name"},"Connection"),e(" connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"PreparedStatement"),e(" ps "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"ResultSet"),e(" resultSet "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"try"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token comment"},"// 自己封装的方法, 获取Connection对象"),e("\n    connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token class-name"},"JDBCUtils"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getConnection"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"SELECT id, name, email, birth "'),e(),t("span",{class:"token operator"},"+"),e("\n        "),t("span",{class:"token string"},'"FROM customers"'),t("span",{class:"token punctuation"},";"),e("\n    ps "),t("span",{class:"token operator"},"="),e(" connection"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"prepareStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n    "),t("span",{class:"token comment"},"// 执行, 并返回结果集"),e("\n    resultSet "),t("span",{class:"token operator"},"="),e(" ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"executeQuery"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token comment"},"// 处理结果集"),e("\n    "),t("span",{class:"token comment"},"// 判断结果集的下一条是否有数据, 并且有则下移"),e("\n    "),t("span",{class:"token comment"},"// 相当于迭代器中hasNext()和next()的功能"),e("\n    "),t("span",{class:"token keyword"},"while"),e(),t("span",{class:"token punctuation"},"("),e("resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"next"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"int"),e(" id "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getInt"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token class-name"},"String"),e(" name "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"2"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token class-name"},"String"),e(" email "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getString"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"3"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token class-name"},"Date"),e(" birth "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDate"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"4"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n        "),t("span",{class:"token comment"},"// 展示:"),e("\n        "),t("span",{class:"token comment"},"// ORM思想 (Object Relational Mapping)"),e("\n        "),t("span",{class:"token comment"},"// 一个数据表对应一个Java类"),e("\n        "),t("span",{class:"token comment"},"// 表中一条记录对应Java类的一个对象"),e("\n        "),t("span",{class:"token comment"},"// 表中一个字段对应Java类的一个属性"),e("\n        "),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("out"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"println"),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Customer"),t("span",{class:"token punctuation"},"("),e("id"),t("span",{class:"token punctuation"},","),e(" name "),t("span",{class:"token punctuation"},","),e("email"),t("span",{class:"token punctuation"},","),e(" birth"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br")])],-1),N=t("h4",{id:"针对单表通用查询",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#针对单表通用查询","aria-hidden":"true"},"#"),e(" 针对单表通用查询")],-1),F=t("p",null,"下面尝试将代码通用化.",-1),A=t("p",null,[e("我们通过"),t("code",null,"next()"),e("方法来不断遍历, 直到所有的行都被遍历完. 这只是在行层面上的遍历, 然而, 每一次用户"),t("em",null,"查询了多少列"),e("是未知的, 我们如何获取列数和"),t("em",null,"对应的数据名称"),e("呢?")],-1),I=t("p",null,"通过修改上述代码, 我们可以写一个只针对Customer表的、通用的查询方法:",-1),Q=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token doc-comment comment"},[e("/**\n     * 针对Customer表的通用查找操作\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"sql"),e(" SQL语句\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"args"),e(" 其他参数\n     * "),t("span",{class:"token keyword"},"@throws"),e(),t("span",{class:"token reference"},[t("span",{class:"token class-name"},"Exception")]),e(" 错误\n     */")]),e("\n"),t("span",{class:"token keyword"},"public"),e(),t("span",{class:"token keyword"},"static"),e(),t("span",{class:"token keyword"},"void"),e(),t("span",{class:"token function"},"commonQueryForCustomer"),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"String"),e(" sql"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"Object"),e(),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),e("args"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token keyword"},"throws"),e(),t("span",{class:"token class-name"},"Exception"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token comment"},"// 获取数据库连接"),e("\n    "),t("span",{class:"token class-name"},"Connection"),e(" connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"getConnection"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"PreparedStatement"),e(" ps "),t("span",{class:"token operator"},"="),e(" connection"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"prepareStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token comment"},"// 填充参数"),e("\n    "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" args"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},"["),e("i"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token comment"},"// 执行"),e("\n    "),t("span",{class:"token class-name"},"ResultSet"),e(" resultSet "),t("span",{class:"token operator"},"="),e(" ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"executeQuery"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token comment"},"// 获取源数据, 之后会用到"),e("\n    "),t("span",{class:"token class-name"},"ResultSetMetaData"),e(" metaData "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getMetaData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\t"),t("span",{class:"token comment"},"// 用源数据获取列数"),e("\n    "),t("span",{class:"token keyword"},"int"),e(" columnCount "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnCount"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"try"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token comment"},"// 遍历每一行"),e("\n        "),t("span",{class:"token keyword"},"while"),e(),t("span",{class:"token punctuation"},"("),e("resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"next"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n            "),t("span",{class:"token class-name"},"Customer"),e(" c "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Customer"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" columnCount"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token operator"},"++"),e("i"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                "),t("span",{class:"token comment"},"// 遍历每一列"),e("\n                "),t("span",{class:"token class-name"},"Object"),e(" object "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token class-name"},"String"),e(" columnName "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnName"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token comment"},"// 利用反射机制为Customer c的变量域赋值"),e("\n                "),t("span",{class:"token class-name"},"Field"),e(" field "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token class-name"},"Customer"),t("span",{class:"token punctuation"},"."),t("span",{class:"token keyword"},"class"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredField"),t("span",{class:"token punctuation"},"("),e("columnName"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                field"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setAccessible"),t("span",{class:"token punctuation"},"("),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                field"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("c"),t("span",{class:"token punctuation"},","),e(" object"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token punctuation"},"}"),e("\n            "),t("span",{class:"token class-name"},"System"),t("span",{class:"token punctuation"},"."),e("out"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"println"),t("span",{class:"token punctuation"},"("),e("c"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"catch"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Exception"),e(" e"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        e"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"printStackTrace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"finally"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token function"},"closeConnection"),t("span",{class:"token punctuation"},"("),e("connection"),t("span",{class:"token punctuation"},","),e(" ps"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br"),t("span",{class:"line-number"},"38"),t("br"),t("span",{class:"line-number"},"39"),t("br"),t("span",{class:"line-number"},"40"),t("br"),t("span",{class:"line-number"},"41"),t("br")])],-1),M=t("p",null,"回顾上面的代码, 我们获取了元数据, 然后又用元数据中的相关参数获取了列数和列对应的名称.",-1),B=t("blockquote",null,[t("p",null,[t("strong",null,"ResultSetMetaData常用方法")]),t("ul",null,[t("li",null,[t("p",null,"获取: ResultSetMetaData meta = rs.getMetaData();")]),t("li",null,[t("p",null,[t("strong",null,"getColumnName"),e("(int column)：获取指定列的名称")])]),t("li",null,[t("p",null,[t("strong",null,"getColumnLabel"),e("(int column)：获取指定列的别名")])]),t("li",null,[t("p",null,[t("strong",null,"getColumnCount"),e("()：返回当前 ResultSet 对象中的列数。")])]),t("li",null,[t("p",null,"getColumnTypeName(int column)：检索指定列的数据库特定的类型名称。")]),t("li",null,[t("p",null,"getColumnDisplaySize(int column)：指示指定列的最大标准宽度，以字符为单位。")]),t("li",null,[t("p",null,[t("strong",null,"isNullable"),e("(int column)：指示指定列中的值是否可以为 null。")])]),t("li",null,[t("p",null,"isAutoIncrement(int column)：指示是否自动为指定列进行编号，这样这些列仍然是只读的。")])])],-1),z=t("p",null,"另外还有一个需要注意的问题:",-1),P=t("p",null,"由于数据库中往往是下划线命名法, 但是在Java中常采用小驼峰命名, 所以有可能出现名称不一致的情况, 比如:",-1),_=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// MySQL中: student(s_name, s_id, s_age);"),e("\n"),t("span",{class:"token keyword"},"class"),e(),t("span",{class:"token class-name"},"Student"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token class-name"},"String"),e(" sName"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token class-name"},"String"),e(" sId"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"private"),e(),t("span",{class:"token class-name"},"String"),e(" sAge"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token comment"},"// ...."),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br")])],-1),J=t("p",null,[e("此时的解决方法是"),t("strong",null,"起别名"),e(", 并用"),t("code",null,"getColumnLabel(int column)"),e("方法代替getColumnName")],-1),U=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// SQL语句中要起别名"),e("\n"),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"SELECT s_id sID, s_name sName, s_age sAge"'),e(),t("span",{class:"token operator"},"+"),e("\n    "),t("span",{class:"token string"},'"FROM customers"'),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token comment"},"// 获取列的名称, 不然怎么知道赋值给谁"),e("\n"),t("span",{class:"token comment"},"// String columnName = rsmd.getColumnName(i + 1);"),e("\n"),t("span",{class:"token class-name"},"String"),e(" columnLabel "),t("span",{class:"token operator"},"="),e(" rsmd"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnLabel"),t("span",{class:"token punctuation"},"("),e("i "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 通过反射, 将对象指定名columnName的属性赋值为指定的columnValue"),e("\n"),t("span",{class:"token comment"},"// Field field = Order.class.getDeclaredField(columnName);"),e("\n"),t("span",{class:"token class-name"},"Field"),e(" field "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token class-name"},"Order"),t("span",{class:"token punctuation"},"."),t("span",{class:"token keyword"},"class"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredField"),t("span",{class:"token punctuation"},"("),e("columnLabel"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br")])],-1),H=t("blockquote",null,[t("p",null,"注意不要写错了!"),t("p",null,[t("code",null,"getFields()"),e("：获得某个类的所有的"),t("strong",null,[e("公共（public）"),t("strong",null,[e("的字段，包括父类中的字段。 "),t("code",null,"getDeclaredFields()"),e("：获得某个类的")]),e("所有声明的字段")]),e("，即包括public、private和proteced，但是不包括父类的申明字段")])],-1),V=t("h4",{id:"任意表通用查询",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#任意表通用查询","aria-hidden":"true"},"#"),e(" 任意表通用查询")],-1),W=t("p",null,[e("上一节中代码之所以是只针对"),t("code",null,"Customer"),e(" 表, 是因为如下两段代码:")],-1),G=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token class-name"},"Customer"),e(" c "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"Customer"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n"),t("span",{class:"token comment"},"// 利用反射机制为Customer c的变量域赋值"),e("\n"),t("span",{class:"token class-name"},"Field"),e(" field "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token class-name"},"Customer"),t("span",{class:"token punctuation"},"."),t("span",{class:"token keyword"},"class"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredField"),t("span",{class:"token punctuation"},"("),e("columnName"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br")])],-1),Y=t("p",null,[e("这两段代码是写死的, 所以我们的查询操作只能针对于"),t("code",null,"Customer"),e("表进行, 也就是说, 如果我们想针对多个表进行查询, 则要修改这个语句, 使得可以动态地决定要创建的类是什么(也就是要利用"),t("strong",null,"泛型"),e("技术):")],-1),K=t("blockquote",null,[t("p",null,"下面代码改动的要点:"),t("ol",null,[t("li",null,[t("p",null,"用泛型<T>代表类型, 让用户自行传入类的类型")]),t("li",null,[t("p",null,"创建类的代码改为了用反射机制动态创建:")])]),t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token class-name"},"T"),e(" c "),t("span",{class:"token operator"},"="),e(" clazz"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredConstructor"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"newInstance"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br")])]),t("ol",{start:"3"},[t("li",null,"操作类的域时, 使用用户传入的类的类型")]),t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token class-name"},"Field"),e(" field "),t("span",{class:"token operator"},"="),e(" clazz"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredField"),t("span",{class:"token punctuation"},"("),e("columnName"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br")])])],-1),X=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token doc-comment comment"},[e("/**\n     * 通用查询(只能返回一个值)\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"clazz"),e(" 类别\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"sql"),e("   SQL语句\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"args"),e(" 参数\n     * "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token class-name"},[t("span",{class:"token punctuation"},"<"),e("T"),t("span",{class:"token punctuation"},">")]),e(" 类别\n     * "),t("span",{class:"token keyword"},"@return"),e(" 查询结果对象\n     * "),t("span",{class:"token keyword"},"@throws"),e(),t("span",{class:"token reference"},[t("span",{class:"token class-name"},"Exception")]),e(" 出错\n     */")]),e("\n"),t("span",{class:"token keyword"},"public"),e(),t("span",{class:"token keyword"},"static"),e(),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token class-name"},"T"),t("span",{class:"token punctuation"},">")]),e(),t("span",{class:"token class-name"},"T"),e(),t("span",{class:"token function"},"commonQuery"),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Class"),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token class-name"},"T"),t("span",{class:"token punctuation"},">")]),e(" clazz"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"String"),e(" sql"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"Object"),e(),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),e("args"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token keyword"},"throws"),e(),t("span",{class:"token class-name"},"Exception"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token class-name"},"Connection"),e(" connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token function"},"getConnection"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"PreparedStatement"),e(" ps "),t("span",{class:"token operator"},"="),e(" connection"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"prepareStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" args"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},"["),e("i"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token class-name"},"ResultSet"),e(" resultSet "),t("span",{class:"token operator"},"="),e(" ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"executeQuery"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"ResultSetMetaData"),e(" metaData "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getMetaData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n    "),t("span",{class:"token keyword"},"int"),e(" columnCount "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnCount"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"try"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token comment"},"// 遍历每一行"),e("\n        "),t("span",{class:"token keyword"},"while"),e(),t("span",{class:"token punctuation"},"("),e("resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"next"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n\n            "),t("span",{class:"token comment"},"// Customer c = new Customer();"),e("\n            "),t("span",{class:"token comment"},"// 创建类"),e("\n            "),t("span",{class:"token class-name"},"T"),e(" c "),t("span",{class:"token operator"},"="),e(" clazz"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredConstructor"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"newInstance"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n            "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" columnCount"),t("span",{class:"token punctuation"},";"),e(),t("span",{class:"token operator"},"++"),e("i"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                "),t("span",{class:"token comment"},"// 遍历每一列"),e("\n                "),t("span",{class:"token class-name"},"Object"),e(" object "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token class-name"},"String"),e(" columnName "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnLabel"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token comment"},"// 利用反射机制为Customer c的变量域赋值"),e("\n                "),t("span",{class:"token class-name"},"Field"),e(" field "),t("span",{class:"token operator"},"="),e(" clazz"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredField"),t("span",{class:"token punctuation"},"("),e("columnName"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                field"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setAccessible"),t("span",{class:"token punctuation"},"("),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                field"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("c"),t("span",{class:"token punctuation"},","),e(" object"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token punctuation"},"}"),e("\n            "),t("span",{class:"token keyword"},"return"),e(" c"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"catch"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Exception"),e(" e"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        e"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"printStackTrace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"finally"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token function"},"closeConnection"),t("span",{class:"token punctuation"},"("),e("connection"),t("span",{class:"token punctuation"},","),e(" ps"),t("span",{class:"token punctuation"},","),e(" resultSet"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token keyword"},"return"),e(),t("span",{class:"token keyword"},"null"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br"),t("span",{class:"line-number"},"38"),t("br"),t("span",{class:"line-number"},"39"),t("br"),t("span",{class:"line-number"},"40"),t("br"),t("span",{class:"line-number"},"41"),t("br"),t("span",{class:"line-number"},"42"),t("br"),t("span",{class:"line-number"},"43"),t("br"),t("span",{class:"line-number"},"44"),t("br"),t("span",{class:"line-number"},"45"),t("br")])],-1),Z=t("blockquote",null,[t("p",null,"注意: 有时数据库中表名是数据库的关键词, 此时应用`括住, 如:"),t("div",{class:"language-sql ext-sql line-numbers-mode"},[t("pre",{class:"language-sql"},[t("code",null,[t("span",{class:"token keyword"},"SELECT"),e(" order_id orderId"),t("span",{class:"token punctuation"},","),e(" order_name orderName "),t("span",{class:"token keyword"},"FROM"),e(),t("span",{class:"token punctuation"},"`"),t("span",{class:"token keyword"},"Order"),t("span",{class:"token punctuation"},"`"),e(),t("span",{class:"token keyword"},"WHERE"),e(" order_id "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br")])])],-1),$=t("h4",{id:"通用查询-返回多个结果",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#通用查询-返回多个结果","aria-hidden":"true"},"#"),e(" 通用查询(返回多个结果)")],-1),nn=t("p",null,[e("将返回值改为"),t("code",null,"ArrayList<T> T"),e("即可:")],-1),sn=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token doc-comment comment"},[e("/**\n* 通用查询的进阶版:可以返回多个结果\n* "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"clazz"),e(" 类别\n* "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"sql"),e(" SQL语句\n* "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token parameter"},"args"),e(" 参数\n* "),t("span",{class:"token keyword"},"@param"),e(),t("span",{class:"token class-name"},[t("span",{class:"token punctuation"},"<"),e("T"),t("span",{class:"token punctuation"},">")]),e(" 类别\n* "),t("span",{class:"token keyword"},"@return"),e(" 返回多个结果的ArrayList\n*/")]),e("\n"),t("span",{class:"token keyword"},"public"),e(),t("span",{class:"token keyword"},"static"),e(),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token class-name"},"T"),t("span",{class:"token punctuation"},">")]),t("span",{class:"token class-name"},"ArrayList"),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token class-name"},"T"),t("span",{class:"token punctuation"},">")]),e(),t("span",{class:"token function"},"commonQueryPlus"),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Class"),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token class-name"},"T"),t("span",{class:"token punctuation"},">")]),e(" clazz"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"String"),e(" sql"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token class-name"},"Object"),e(),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),t("span",{class:"token punctuation"},"."),e("args"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token keyword"},"throws"),e(),t("span",{class:"token class-name"},"Exception"),e(),t("span",{class:"token punctuation"},"{"),e("\n    "),t("span",{class:"token class-name"},"Connection"),e(" connection "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token class-name"},"JDBCUtils"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getConnection"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"PreparedStatement"),e(" preparedStatement "),t("span",{class:"token operator"},"="),e(" connection"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"prepareStatement"),t("span",{class:"token punctuation"},"("),e("sql"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" args"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        preparedStatement"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},"["),e("i"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n\n    "),t("span",{class:"token class-name"},"ArrayList"),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token class-name"},"T"),t("span",{class:"token punctuation"},">")]),e(" arrayList "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"ArrayList"),t("span",{class:"token generics"},[t("span",{class:"token punctuation"},"<"),t("span",{class:"token punctuation"},">")]),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n    "),t("span",{class:"token class-name"},"ResultSet"),e(" resultSet "),t("span",{class:"token operator"},"="),e(" preparedStatement"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"executeQuery"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token class-name"},"ResultSetMetaData"),e(" metaData "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getMetaData"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token keyword"},"int"),e(" columnCount "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnCount"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n    "),t("span",{class:"token comment"},"// 遍历行"),e("\n    "),t("span",{class:"token keyword"},"try"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token keyword"},"while"),e(),t("span",{class:"token punctuation"},"("),e("resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"next"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n            "),t("span",{class:"token class-name"},"T"),e(" t "),t("span",{class:"token operator"},"="),e(" clazz"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"newInstance"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" columnCount"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n                "),t("span",{class:"token class-name"},"Object"),e(" object "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getObject"),t("span",{class:"token punctuation"},"("),e("i "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                "),t("span",{class:"token class-name"},"String"),e(" columnLabel "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnLabel"),t("span",{class:"token punctuation"},"("),e("i "),t("span",{class:"token operator"},"+"),e(),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n\n                "),t("span",{class:"token comment"},"// 通过反射复制"),e("\n                "),t("span",{class:"token class-name"},"Field"),e(" field "),t("span",{class:"token operator"},"="),e(" clazz"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getDeclaredField"),t("span",{class:"token punctuation"},"("),e("columnLabel"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                field"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setAccessible"),t("span",{class:"token punctuation"},"("),t("span",{class:"token boolean"},"true"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n                field"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"set"),t("span",{class:"token punctuation"},"("),e("t"),t("span",{class:"token punctuation"},","),e(" object"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n            "),t("span",{class:"token punctuation"},"}"),e("\n            arrayList"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"add"),t("span",{class:"token punctuation"},"("),e("t"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n        "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"catch"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token class-name"},"Exception"),e(" e"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n        e"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"printStackTrace"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e(),t("span",{class:"token keyword"},"finally"),e(),t("span",{class:"token punctuation"},"{"),e("\n        "),t("span",{class:"token class-name"},"JDBCUtils"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"closeConnection"),t("span",{class:"token punctuation"},"("),e("connection"),t("span",{class:"token punctuation"},","),e(" preparedStatement"),t("span",{class:"token punctuation"},","),e(" resultSet"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n    "),t("span",{class:"token punctuation"},"}"),e("\n    "),t("span",{class:"token keyword"},"return"),e(" arrayList"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br"),t("span",{class:"line-number"},"13"),t("br"),t("span",{class:"line-number"},"14"),t("br"),t("span",{class:"line-number"},"15"),t("br"),t("span",{class:"line-number"},"16"),t("br"),t("span",{class:"line-number"},"17"),t("br"),t("span",{class:"line-number"},"18"),t("br"),t("span",{class:"line-number"},"19"),t("br"),t("span",{class:"line-number"},"20"),t("br"),t("span",{class:"line-number"},"21"),t("br"),t("span",{class:"line-number"},"22"),t("br"),t("span",{class:"line-number"},"23"),t("br"),t("span",{class:"line-number"},"24"),t("br"),t("span",{class:"line-number"},"25"),t("br"),t("span",{class:"line-number"},"26"),t("br"),t("span",{class:"line-number"},"27"),t("br"),t("span",{class:"line-number"},"28"),t("br"),t("span",{class:"line-number"},"29"),t("br"),t("span",{class:"line-number"},"30"),t("br"),t("span",{class:"line-number"},"31"),t("br"),t("span",{class:"line-number"},"32"),t("br"),t("span",{class:"line-number"},"33"),t("br"),t("span",{class:"line-number"},"34"),t("br"),t("span",{class:"line-number"},"35"),t("br"),t("span",{class:"line-number"},"36"),t("br"),t("span",{class:"line-number"},"37"),t("br"),t("span",{class:"line-number"},"38"),t("br"),t("span",{class:"line-number"},"39"),t("br"),t("span",{class:"line-number"},"40"),t("br"),t("span",{class:"line-number"},"41"),t("br"),t("span",{class:"line-number"},"42"),t("br"),t("span",{class:"line-number"},"43"),t("br")])],-1),an=t("h3",{id:"p-s-和statement比较",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#p-s-和statement比较","aria-hidden":"true"},"#"),e(" P.S.和Statement比较")],-1),tn=t("h2",{id:"操作blob类型字段",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#操作blob类型字段","aria-hidden":"true"},"#"),e(" 操作BLOB类型字段")],-1),en=t("h3",{id:"blob类型",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#blob类型","aria-hidden":"true"},"#"),e(" BLOB类型")],-1),cn=t("ul",null,[t("li",null,[t("p",null,"MySQL中，BLOB是一个二进制大型对象，是一个可以存储大量数据的容器，它能容纳不同大小的数据。")]),t("li",null,[t("p",null,"插入BLOB类型的数据必须使用PreparedStatement，因为BLOB类型的数据无法使用字符串拼接写的。")]),t("li",null,[t("p",null,"MySQL的四种BLOB类型(除了在存储的最大信息量上不同外，他们是等同的)"),t("p",null,[t("img",{src:"/assets/image-20210721103455235.dc7dedb0.png",alt:"image-20210721103455235"})])]),t("li",null,[t("p",null,"需要注意的是：如果存储的文件过大，数据库的性能会下降。")]),t("li",null,[t("p",null,[e("如果在指定了相关的Blob类型以后，还报错：xxx too large，那么在mysql的安装目录下，找my.ini文件加上如下的配置参数： "),t("strong",null,"max_allowed_packet=16M"),e("。同时注意：修改了my.ini文件之后，需要重新启动mysql服务。")])])],-1),on=t("hr",null,null,-1),ln=t("p",null,"删除操作不涉及具体的类型, 所以这里重点书写插入、修改和读取的操作:",-1),pn=t("h3",{id:"插入",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#插入","aria-hidden":"true"},"#"),e(" 插入")],-1),un=t("p",null,"与插入普通数据不同, 插入Blob只需将相应文件的流传入即可(记得关闭is)",-1),rn=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"INSERT INTO customers VALUES(?,?,?,?,?)"'),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token class-name"},"FileInputStream"),e(" is "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"FileInputStream"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"moon.png"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"5"),t("span",{class:"token punctuation"},","),e(" is"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br")])],-1),kn=t("h3",{id:"修改",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#修改","aria-hidden":"true"},"#"),e(" 修改")],-1),mn=t("p",null,"同理, 修改也很简单(记得关闭is)",-1),bn=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"update customers set photo = ? where id = ?"'),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token comment"},"// 填充占位符"),e("\n"),t("span",{class:"token comment"},"// 操作Blob类型的变量"),e("\n"),t("span",{class:"token class-name"},"FileInputStream"),e(" fis "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"FileInputStream"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"coffee.png"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setBlob"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" fis"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setInt"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"2"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"25"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br")])],-1),dn=t("h3",{id:"读取",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#读取","aria-hidden":"true"},"#"),e(" 读取")],-1),gn=t("p",null,[e("读取就是将数据库中的图片保存到本地文件目录中, 结合上面的操作, 不难想象, 读取操作应该也和流有关, 并且是获取一个流, 然后利用"),t("code",null,"OutputStream"),e("流传输到本地(很显然, 你要清楚流相关的操作)")],-1),yn=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token class-name"},"String"),e(" sql "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token string"},'"SELECT photo FROM customers where id = ?"'),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n"),t("span",{class:"token class-name"},"Blob"),e(" blob "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getBlob"),t("span",{class:"token punctuation"},"("),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\nis "),t("span",{class:"token operator"},"="),e(" blob"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getBinaryStream"),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"OutputStream"),e(" os "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token class-name"},"FileOutputStream"),t("span",{class:"token punctuation"},"("),t("span",{class:"token string"},'"result.png"'),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"byte"),t("span",{class:"token punctuation"},"["),t("span",{class:"token punctuation"},"]"),e(" buffer "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token keyword"},"new"),e(),t("span",{class:"token keyword"},"byte"),t("span",{class:"token punctuation"},"["),t("span",{class:"token number"},"1024"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"int"),e(" len "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token keyword"},"while"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token punctuation"},"("),e("len "),t("span",{class:"token operator"},"="),e(" is"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"read"),t("span",{class:"token punctuation"},"("),e("buffer"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token operator"},"!="),e(),t("span",{class:"token operator"},"-"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    os"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"write"),t("span",{class:"token punctuation"},"("),e("buffer"),t("span",{class:"token punctuation"},","),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},","),e(" len"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n"),t("span",{class:"token comment"},"// ..."),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br"),t("span",{class:"line-number"},"9"),t("br"),t("span",{class:"line-number"},"10"),t("br"),t("span",{class:"line-number"},"11"),t("br"),t("span",{class:"line-number"},"12"),t("br")])],-1),Sn=t("h2",{id:"批量插入",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#批量插入","aria-hidden":"true"},"#"),e(" 批量插入")],-1),fn=t("p",null,"当一次需要插入多条数据时, 采用合理的方法和策略可以有效地优化语句.",-1),wn=t("h2",{id:"易错点",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#易错点","aria-hidden":"true"},"#"),e(" 易错点")],-1),hn=t("h3",{id:"序号问题",tabindex:"-1"},[t("a",{class:"header-anchor",href:"#序号问题","aria-hidden":"true"},"#"),e(" 序号问题")],-1),vn=t("p",null,[t("u",null,"问题描述:"),e(" 在SQL中一般是从0开始计数, 而在Java中则是从0开始计数. 编写代码时要注意区分, 防止越界.")],-1),xn=t("p",null,"从1开始的几个地方:",-1),jn=t("div",{class:"language-java ext-java line-numbers-mode"},[t("pre",{class:"language-java"},[t("code",null,[t("span",{class:"token comment"},"// 1. 给占位符赋值的时候"),e("\n"),t("span",{class:"token keyword"},"for"),e(),t("span",{class:"token punctuation"},"("),t("span",{class:"token keyword"},"int"),e(" i "),t("span",{class:"token operator"},"="),e(),t("span",{class:"token number"},"0"),t("span",{class:"token punctuation"},";"),e(" i "),t("span",{class:"token operator"},"<"),e(" args"),t("span",{class:"token punctuation"},"."),e("length"),t("span",{class:"token punctuation"},";"),e(" i"),t("span",{class:"token operator"},"++"),t("span",{class:"token punctuation"},")"),e(),t("span",{class:"token punctuation"},"{"),e("\n    ps"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"setObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},","),e(" args"),t("span",{class:"token punctuation"},"["),e("i"),t("span",{class:"token punctuation"},"]"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\t\t"),t("span",{class:"token comment"},"// 注意第一个从1开始"),e("\n"),t("span",{class:"token punctuation"},"}"),e("\n\n"),t("span",{class:"token comment"},"// 2. 遍历每一行时, 对每一列的操作:"),e("\n"),t("span",{class:"token class-name"},"Object"),e(" object "),t("span",{class:"token operator"},"="),e(" resultSet"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getObject"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n"),t("span",{class:"token class-name"},"String"),e(" columnName "),t("span",{class:"token operator"},"="),e(" metaData"),t("span",{class:"token punctuation"},"."),t("span",{class:"token function"},"getColumnLabel"),t("span",{class:"token punctuation"},"("),e("i"),t("span",{class:"token operator"},"+"),t("span",{class:"token number"},"1"),t("span",{class:"token punctuation"},")"),t("span",{class:"token punctuation"},";"),e("\n")])]),t("div",{class:"line-numbers"},[t("span",{class:"line-number"},"1"),t("br"),t("span",{class:"line-number"},"2"),t("br"),t("span",{class:"line-number"},"3"),t("br"),t("span",{class:"line-number"},"4"),t("br"),t("span",{class:"line-number"},"5"),t("br"),t("span",{class:"line-number"},"6"),t("br"),t("span",{class:"line-number"},"7"),t("br"),t("span",{class:"line-number"},"8"),t("br")])],-1);c.render=function(t,e){return n(),s(a,null,[o,l,p,u,r,i,k,m,b,d,g,y,S,f,w,h,v,x,j,C,L,O,q,D,T,E,R,N,F,A,I,Q,M,B,z,P,_,J,U,H,V,W,G,Y,K,X,Z,$,nn,sn,an,tn,en,cn,on,ln,pn,un,rn,kn,mn,bn,dn,gn,yn,Sn,fn,wn,hn,vn,xn,jn],64)};export{c as default};
