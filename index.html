<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.26">
    <title>æ•°æ®åº“çš„è¿æ¥ | ä½ å¥½ï¼Œ VuePress ï¼</title><meta name="description" content="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ª VuePress ç«™ç‚¹">
    <link rel="preload" href="/assets/js/runtime~app.4fc71abc.js" as="script"><link rel="preload" href="/assets/css/styles.e2329f47.css" as="style"><link rel="preload" href="/assets/js/356.fe3293ab.js" as="script"><link rel="preload" href="/assets/js/app.813f9633.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.e2329f47.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a aria-current="page" href="/" class="router-link-active router-link-exact-active"><img class="logo" src="https://vuejs.org/images/logo.png" alt="ä½ å¥½ï¼Œ VuePress ï¼"><span class="site-name can-hide">ä½ å¥½ï¼Œ VuePress ï¼</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">æ•°æ®åº“çš„è¿æ¥</p><ul class=""><li><!--[--><a aria-current="page" href="/#åŸºæœ¬è¿æ¥" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="åŸºæœ¬è¿æ¥"><!--[--><!--]--> åŸºæœ¬è¿æ¥ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/#æ”¹è¿›" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ”¹è¿›"><!--[--><!--]--> æ”¹è¿› <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/#æ”¹è¿›ä¸€" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ”¹è¿›ä¸€"><!--[--><!--]--> æ”¹è¿›ä¸€ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/#æ”¹è¿›äºŒ" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ”¹è¿›äºŒ"><!--[--><!--]--> æ”¹è¿›äºŒ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/#æ”¹è¿›ä¸‰" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ”¹è¿›ä¸‰"><!--[--><!--]--> æ”¹è¿›ä¸‰ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/#æ”¹è¿›å››" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="æ”¹è¿›å››"><!--[--><!--]--> æ”¹è¿›å›› <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="æ•°æ®åº“çš„è¿æ¥" tabindex="-1"><a class="header-anchor" href="#æ•°æ®åº“çš„è¿æ¥" aria-hidden="true">#</a> æ•°æ®åº“çš„è¿æ¥</h1><h2 id="åŸºæœ¬è¿æ¥" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬è¿æ¥" aria-hidden="true">#</a> åŸºæœ¬è¿æ¥</h2><p>åœ¨<code>java.sql</code> è¿™ä¸ªåº“ä¸­å®šä¹‰äº†å„ç§æ•°æ®åº“ç›¸å…³çš„<strong>æ¥å£,</strong> å…·ä½“çš„å®ç°åˆ™éœ€è¦åœ¨å„å¤§æ•°æ®åº“çš„å®˜ç½‘ä¸‹è½½. ç”±äºè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯MySQLæ•°æ®åº“, æ‰€ä»¥æˆ‘ä»¬è¦å€ŸåŠ©äºå¯¼å…¥MySQLçš„JARåŒ…é©±åŠ¨æ¥è¿æ¥æ•°æ®åº“.</p><blockquote><p>ä¸åŒIDEå¦‚ä½•å¯¼å…¥JARåŒ…éœ€è‡ªè¡Œç™¾åº¦</p></blockquote><p>åœ¨MySQLä¸­çš„JARåŒ…ä¸­æœ‰å®ç°äº†<code>Driver</code> æ¥å£çš„ç±», æˆ‘ä»¬è¦å…ˆåˆ›å»ºä¸€ä¸ªå…·ä½“çš„å¯¹è±¡:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ç”±äºé‡åé—®é¢˜, æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå¿…é¡»å¸¦ä¸ŠåŒ…å</span>
<span class="token comment">// å¤šæ€: ç”¨æ¥å£å˜é‡æŒ‡å‘æ¥å£çš„å®ç°ç±»</span>
<span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç´§æ¥ç€, æˆ‘ä»¬è¦å¼€å§‹è¿æ¥æ•°æ®åº“:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Connection</span> conn <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>é€šè¿‡API, æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, <code>connect</code> å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°, ç¬¬ä¸€ä¸ªurlæ˜¯æ•°æ®åº“çš„åœ°å€, ç¬¬äºŒä¸ªå‚æ•°åˆ™æºå¸¦äº†ä¸€äº›ä¿¡æ¯(è‡³å°‘è¦æä¾›ç”¨æˆ·åå’Œå¯†ç ), æˆ‘ä»¬éœ€è¦æå‰å‡†å¤‡å¥½è¿™äº›:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// å‡†å¤‡é…ç½®ä¿¡æ¯</span>
<span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Properties</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä¼ å…¥å‚æ•°</span>
<span class="token class-name">Connection</span> conn <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p><strong>URLçš„æ ¼å¼:</strong> URLç”±å‡ éƒ¨åˆ†ç»„æˆ: <code>åè®®åç§°</code> ğŸ˜•/<code>åœ°å€</code> :<code>ç«¯å£å·</code> /<code>æ•°æ®åº“åç§°</code> å¯ä»¥å¯¹åº”äºä¸Šä¾‹å­ä¸­çš„å„éƒ¨åˆ† ä¸åŒæ•°æ®åº“çš„åè®®åç§°å¯ä»¥è‡ªè¡Œç™¾åº¦</p></blockquote><p>å¦‚æœä½ çš„ç”¨æˆ·åå’Œå¯†ç æ²¡æœ‰é”™è¯¯, è¿™é‡Œå°±å¯ä»¥æ‰“å°å‡º<code>conn</code> å¯¹è±¡äº†:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>æ•°æ®åº“ä¹Ÿæ˜¯ä¸€ç§èµ„æº, æ‰€ä»¥è®°å¾—åœ¨ä½¿ç”¨å®Œæˆåå…³é—­è¯¥è¿æ¥:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æºä»£ç : è¿æ¥æ•°æ®åº“(1)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Connection1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
    <span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">Properties</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="æ”¹è¿›" tabindex="-1"><a class="header-anchor" href="#æ”¹è¿›" aria-hidden="true">#</a> æ”¹è¿›</h2><h3 id="æ”¹è¿›ä¸€" tabindex="-1"><a class="header-anchor" href="#æ”¹è¿›ä¸€" aria-hidden="true">#</a> æ”¹è¿›ä¸€</h3><p>ä¸Šè¿°æºä»£ç æœ‰ä¸å¥½çš„åœ°æ–¹: æˆ‘ä»¬æŠŠé©±åŠ¨ä¸­çš„åŒ…ç›´æ¥æš´éœ²åœ¨äº†æˆ‘ä»¬çš„æºä»£ç ä¸­:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>è¿™ä¸æ˜¯ä¸€ç§å¥½çš„ç¼–ç¨‹ä¹ æƒ¯**(ä¸ºä»€ä¹ˆä¸æ˜¯?)**</p><p>æˆ‘ä»¬å¯ä»¥ç”¨Javaçš„åå°„æœºåˆ¶åˆ›å»ºç±», å¦‚ä¸‹:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// ä½¿ç”¨åå°„, è·å–Driverå®ç°ç±»å¯¹è±¡</span>
<span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Driver</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å…¶ä»–ä»£ç åˆ™å®Œå…¨ä¸€è‡´</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æºä»£ç : è¿æ¥æ•°æ®åº“(2)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Connection2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. è·å–Driverå®ç°ç±»å¯¹è±¡, ä½¿ç”¨åå°„</span>
    <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Driver</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. æä¾›è¦è¿æ¥çš„æ•°æ®åº“</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. æä¾›è¿æ¥çš„ç”¨æˆ·åå’Œå¯†ç </span>
    <span class="token class-name">Properties</span> info <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;{$a?jR=6hd|Vy*w;SfVU&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. è·å–é“¾æ¥</span>
    <span class="token class-name">Connection</span> connect <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>connect<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 5. å…³é—­èµ„æº</span>
    connect<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="æ”¹è¿›äºŒ" tabindex="-1"><a class="header-anchor" href="#æ”¹è¿›äºŒ" aria-hidden="true">#</a> æ”¹è¿›äºŒ</h3><p>äº‹å®ä¸Š, æˆ‘ä»¬åœ¨å®é™…æ“ä½œæ—¶, ä¸ä¼šç›´æ¥é€šè¿‡<code>Driver</code> æ¥å®Œæˆæˆ‘ä»¬éœ€è¦çš„æ“ä½œ, è€Œæ˜¯ç”¨<code>DriverManager</code> ç±»å®Œæˆéœ€è¦çš„æ­¥éª¤, è¯¥ç±»æœ‰ä¸¤ä¸ªé™æ€æ–¹æ³•:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ³¨å†Œé©±åŠ¨</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¿æ¥æ•°æ®åº“, å¹¶è¿”å›ä¸€ä¸ªConnectionå¯¹è±¡</span>
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ä»£æ›¿ä¸Šé¢çš„éƒ¨åˆ†æ­¥éª¤</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æºä»£ç : è¿æ¥æ•°æ®åº“(3)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Connection3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. æä¾›ä¸‰ä¸ªè¿æ¥çš„åŸºæœ¬ä¿¡æ¯</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;{$a?jR=6hd|Vy*w;SfVU&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. è·å–Driverå®ç°ç±»å¯¹è±¡</span>
    <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Driver</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Driver</span><span class="token punctuation">)</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3. è·å–è¿æ¥</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. å…³é—­è¿æ¥</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="æ”¹è¿›ä¸‰" tabindex="-1"><a class="header-anchor" href="#æ”¹è¿›ä¸‰" aria-hidden="true">#</a> æ”¹è¿›ä¸‰</h3><p>å®é™…ä¸Š, åœ¨æˆ‘ä»¬ç”¨åå°„è·å–Driverå®ç°ç±»å¯¹è±¡æ—¶, ä¼šè‡ªåŠ¨æ³¨å†Œè¯¥ç±»å‹æ•°æ®åº“:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æºä»£ç : è¿æ¥æ•°æ®åº“(4)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Connection3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. æä¾›ä¸‰ä¸ªè¿æ¥çš„åŸºæœ¬ä¿¡æ¯</span>
    <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://localhost:3306/test&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> user <span class="token operator">=</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> <span class="token string">&quot;{$a?jR=6hd|Vy*w;SfVU&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 2. è·å–Driverå®ç°ç±»å¯¹è±¡</span>
    <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Driver driver = (Driver) clazz.newInstance();</span>
    <span class="token comment">// DriverManager.registerDriver(driver);</span>

    <span class="token comment">// 3. è·å–è¿æ¥</span>
    <span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>conn<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4. å…³é—­è¿æ¥</span>
    conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è¿™æ˜¯å› ä¸º, åœ¨è¯¥ç±»ä¸­æœ‰å¦‚ä¸‹é™æ€æ–¹æ³•, æˆ‘ä»¬åœ¨å­¦ä¹ åå°„æ—¶æåˆ°è¿‡, ç”¨<code>forName</code> åˆ›å»ºç±»æ—¶, ä¼šè‡ªåŠ¨è°ƒç”¨ç±»çš„é»˜è®¤æ„é€ å‡½æ•°å’Œé™æ€ä»£ç å—. è¿™é‡Œé€šè¿‡é™æ€ä»£ç å—å®Œæˆäº†æ•°æ®åº“çš„æ³¨å†Œ:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> var1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t register driver!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>åœ¨MySQL 8.+å, æˆ‘ä»¬ç”šè‡³ä¹Ÿä¸ç”¨è‡ªå·±åˆ›å»º<code>Driver</code> çš„å®ç°, ä¹Ÿå°±æ˜¯, å¦‚ä¸‹ä»£ç ä¹Ÿå¯ä»¥è¢«æ³¨é‡Šæ‰:</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 2. è·å–Driverå®ç°ç±»å¯¹è±¡</span>
<span class="token comment">// Class clazz = Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¿™ä¸ªå¯èƒ½å’ŒJARåŒ…ä¸­ä½äº<code>META-INF/services/java.sql.Driver</code> ä½ç½®çš„æ–‡ä»¶æœ‰å…³. <strong>(å…·ä½“åŸå› æš‚æ—¶æœªçŸ¥)</strong></p><h3 id="æ”¹è¿›å››" tabindex="-1"><a class="header-anchor" href="#æ”¹è¿›å››" aria-hidden="true">#</a> æ”¹è¿›å››</h3><p>åœ¨ä¸Šè¿°ä»£ç ä¸­, æˆ‘ä»¬ä»å­˜åœ¨æ•°æ®å’Œä»£ç æ²¡æœ‰åˆ†ç¦»çš„é—®é¢˜, å› æ­¤, åœ¨æœ€å, æˆ‘ä»¬å¯ä»¥å°†éƒ¨åˆ†æ•°æ®æå–å‡ºæ¥, ä¿å­˜åœ¨æ–‡ä»¶ä¸­, é™ä½ç¨‹åºçš„è€¦åˆåº¦:</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># æ”¾åœ¨src/jdbc.propertiesä¸­</span>
<span class="token attr-name">user</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">xxx</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/test</span>
<span class="token attr-name">DriverClass</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.cj.jdbc.Driver</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token class-name">Connection5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">ConnectionTest_1</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Properties</span> prop <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    prop<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> url <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> user <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> driverClass <span class="token operator">=</span> prop<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;driverClass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>driverClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span>
            <span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å®é™…ä¸Š, å·¥ä½œä¸­çš„æ•°æ®åº“è¿æ¥ä¸€èˆ¬ä¼šç”¨æ•°æ®åº“è¿æ¥æ± çš„å½¢å¼, ä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æœ‰å¿…è¦äº†è§£å¹¶ç†Ÿæ‚‰è¿æ¥æ•°æ®åº“çš„åŸºæœ¬æ–¹å¼.</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/9/14 ä¸Šåˆ9:29:28</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 166@qq.com">REN</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.4fc71abc.js" defer></script><script src="/assets/js/356.fe3293ab.js" defer></script><script src="/assets/js/app.813f9633.js" defer></script>
  </body>
</html>
